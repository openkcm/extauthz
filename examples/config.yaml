# Example configuration file for extauthz

# Based on github.com/openkcm/common-sdk/pkg/commoncfg
application:
  name: extauthz
  environment: development

featureGates:
  enrich-header-with-client-type: false
  enrich-header-with-client-region: false
  disable-client-certificate-computation: false
  disable-jwt-token-computation: false

logger:
  level: debug # one of: debug, info, warn, error
  format: text # one of: json, text

status: # status server configuration
  enabled: true
  address: :8080
  profiling: true

# Based on github.com/openkcm/extauthz/pkg/config
grpcServer: # ext_authz gRPC server configuration
  address: :9092
  flags:
    health: true
    reflection: true

# Path to Cedar policy files
cedar:
  policyPath: ./

# Client Certificate handling
mtls:
  trustedSubjectsYaml: ./trustedSubjects.yaml

# JWT Token handling
jwt:
  issuerClaimKeys:
    - ias_iss
    - iss
  k8sProviders:
    apiGroup: gateway.extensions.envoyproxy.io
    apiVersion: v1alpha1
    name: jwtproviders
    namespace: default

# Signing client data
signingKeyIDFile: ./keyID.txt
