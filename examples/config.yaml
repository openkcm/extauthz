# Example configuration file for extauthz

# Based on github.com/openkcm/common-sdk/pkg/commoncfg
application:
  name: extauthz
  environment: development

featureGates:
  EnrichHeaderWithClientType: false
  EnrichHeaderWithClientRegion: false
  DisableClientCertificateComputation: false
  DisableJWTTokenComputation: false
  EnableAlwaysAllow: false

logger:
  level: debug # one of: debug, info, warn, error
  format: text # one of: json, text

status: # status server configuration
  enabled: true
  address: :8080
  profiling: true

# Based on github.com/openkcm/extauthz/pkg/config
grpcServer: # ext_authz gRPC server configuration
  address: :9092
  flags:
    health: true
    reflection: true

# Client Data Key Set handling
cdksServer:
  address: :5555
  signingKeyRefreshInterval: 6h

# Path to Cedar policy files
cedar:
  policyPath: ./

# Client Certificate handling
mtls:
  trustedSubjectsYaml: ./trustedSubjects.yaml

# JWT Token handling
jwt:
  issuerClaimKeys:
    - ias_iss
    - iss
  k8sProviders:
    apiGroup: gateway.extensions.envoyproxy.io
    apiVersion: v1alpha1
    name: jwtproviders
    namespace: default
